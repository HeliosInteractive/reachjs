/*Reach Client v0.9.0*/
!function(a,b){"use strict";function c(a){return a?"string"==typeof a?"?"+a:"?"+Object.keys(a).reduce(function(b,c){return b.push(c+"="+encodeURIComponent(a[c])),b},[]).join("&"):""}function d(a){if(!a)return a;var b={};return a.split("\r\n").forEach(function(a){if(a){var c=a.split(":");b[c[0]]=c[1].trim()}}),b}function e(a,b){b.where&&(a.where=b.where),b.limit&&(a.limit=b.limit),b.include&&(a.include=b.include),b.skip&&(a.skip=b.skip),b.fields&&(a.fields=b.fields);var c=!1;if(Object.keys(a).length>0)try{c=JSON.stringify(a),c="filter="+c}catch(d){}return c}function f(a){return function(b,c,d){return"object"==typeof c?c.method=a:"object"==typeof b&&(b.method=a),n(b,c,d)}}var g=function(a,b,e){var f=this;return f.oReq=new XMLHttpRequest,f.oReq.addEventListener("load",function(a){var b={body:a.target.response,status:a.target.status,url:a.target.responseURL,headers:d(f.oReq.getAllResponseHeaders())};try{var c=JSON.parse(a.target.response);b.body=c}catch(g){}e(null,b)}),a+=c(b.qs),f.oReq.open(b.method&&b.method.toUpperCase()||"GET",a),b.headers&&"object"==typeof b.headers&&Object.keys(b.headers).forEach(f.setHeaders.bind(f,b.headers)),console.log(b.data),b.data?f.oReq.send(JSON.stringify(b.data)):void f.oReq.send()};g.prototype.setHeaders=function(a,b){this.oReq.setRequestHeader(b,a[b])};var h=function(a,b,d){var e=require("http"),f=require("url");a+=c(b.qs);var g=f.parse(a,!0,!0),h=e.request({host:g.host,protocol:g.protocol,path:g.path,headers:b.headers},function(b){b.setEncoding("utf8");var c={body:"",status:b.statusCode,url:a,headers:b.headers};b.on("data",function(a){c.body+=a}),b.on("end",function(){try{var a=JSON.parse(c.body);c.body=a}catch(b){}d(null,c)})}).on("error",function(a){d(a)});h.end()};"undefined"!=typeof module&&module.exports?a.request=module.exports=h:a.request=g;var i,j="http://reachstaging.herokuapp.com/api/",k="http://reachstadiums.herokuapp.com/api/",l=!1,m=k,n=function(b,c,d){if("undefined"==typeof b)throw new Error("undefined is not a valid uri or options object.");if(!n.key)throw new Error("reach.key is required");if("function"==typeof c&&(d=c),"object"==typeof c?c.uri=b:c="string"==typeof b?{uri:b}:b,"/"===c.uri.substr(0,1)&&(c.uri=c.uri.substr(1)),"POST"===c.method||"PUT"===c.method){var f=a.merge(!0,c);delete f.headers,delete f.uri,delete f.data,delete f.method,c.data=f}b=m+c.uri,delete c.uri;var g=e({},c);return g&&(c.qs=g),!c.headers&&(c.headers={}),c.headers["X-Helios-ID"]=n.key,c.headers["Content-Type"]="application/json",new i(b,c,d)};"undefined"!=typeof module&&module.exports?module.exports=n:b.reach=a.reach=n,i=a&&a.request?a.request:require("./lib/request"),a&&a.merge||(a.merge=require("./lib/merge")),n.request=i,n.development=function(a){return a?(l=!!a,void(m=l?j:k)):l},n.key=null,n.get=f("GET"),n.post=f("POST"),n.put=f("PUT"),n.del=f("DELETE"),b["true"]=a}({},function(){return this}());