/*Reach Client v0.9.0*/
!function(a,b){"use strict";function c(a){function b(b,c){return b.push(c+"="+encodeURIComponent(a[c])),b}return a?"string"==typeof a?"?"+a:"?"+Object.keys(a).reduce(b,[]).join("&"):""}function d(a){function b(a){if(a){var b=a.split(":");c[b[0]]=b[1].trim()}}if(!a)return a;var c={};return a.split("\r\n").forEach(b),c}function e(){var a=(new Date).getTime();return window&&window.performance&&"function"==typeof window.performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)})}function f(a){var b,c="---------------------------"+Date.now().toString(16),d=[];if(a[0])for(var f=0;f<a.length;f++)b=e()+j.supportedMimeTypes[a[f].type],d[f]='Content-Disposition: form-data; name="file"; filename="'+b+'"\r\nContent-Type: '+a[f].type+"\r\n\r\n",d[f]+=a[f].data+"\r\n";else b=e()+j.supportedMimeTypes[a.type],d=['Content-Disposition: form-data; name="file"; filename="'+b+'"\r\nContent-Type: '+a.type+"\r\n\r\n"+a.data+"\r\n"];return"--"+c+"\r\n"+d.join("--"+c+"\r\n")+"--"+c+"--\r\n"}function g(a,b){b.where&&(a.where=b.where),b.limit&&(a.limit=b.limit),b.include&&(a.include=b.include),b.skip&&(a.skip=b.skip),b.fields&&(a.fields=b.fields);var c=!1;if(Object.keys(a).length>0)try{c=JSON.stringify(a),c="filter="+c}catch(d){}return c}function h(a){return function(b,c,d){return"object"==typeof c?c.method=a:"object"==typeof b&&(b.method=a),r(b,c,d)}}function i(a,b,c){"/"===a.substr(0,1)&&(a=a.substr(1)),r("containers/reachdata/"+a,{method:"POST",data:b},c)}var j=a&&a.image?a.image:require("./lib/image"),k=function(a,b,e){function g(a){var b={body:a.target.response,status:a.target.status,url:a.target.responseURL,headers:d(h.oReq.getAllResponseHeaders())};try{var c=JSON.parse(a.target.response);b.body=c}catch(f){}e(null,b)}var h=this;h.oReq=new XMLHttpRequest,a+=c(b.qs),h.oReq.addEventListener("load",g),h.oReq.open(b.method&&b.method.toUpperCase()||"GET",a,!0),b.headers&&"object"==typeof b.headers&&Object.keys(b.headers).forEach(h.setHeaders.bind(h,b.headers));var i=null;if(b.data){if(b.headers&&"multipart/formdata"===b.headers["Content-Type"])return h.oReq.sendAsBinary(f(b.data));i=JSON.stringify(b.data)}h.oReq.send(i)};k.prototype.setHeaders=function(a,b){this.oReq.setRequestHeader(b,a[b])};var l=function(a,b,d){function e(b){function c(a){f.body+=a}function e(){try{var a=JSON.parse(f.body);f.body=a}catch(b){}d(null,f)}var f={body:"",status:b.statusCode,url:a,headers:b.headers};b.setEncoding("utf8"),b.on("data",c),b.on("end",e)}function f(a){d(a)}var g=require("http"),h=require("url");a+=c(b.qs);var i=h.parse(a,!0,!0),j={host:i.host,protocol:i.protocol,path:i.path,headers:b.headers,method:b.method},k=g.request(j,e).on("error",f);b.data&&k.write(JSON.stringify(b.data)),k.end()};"undefined"!=typeof module&&module.exports?a.request=module.exports=l:a.request=k;var m,j,n="http://reachstaging.herokuapp.com/api/",o="http://reachstadiums.herokuapp.com/api/",p=!1,q=o,r=function(b,c,d){if("undefined"==typeof b)throw new Error("undefined is not a valid uri or options object.");if(!r.key)throw new Error("reach.key is required");if("function"==typeof c&&(d=c),"object"==typeof c?c.uri=b:c="string"==typeof b?{uri:b}:b,"/"===c.uri.substr(0,1)&&(c.uri=c.uri.substr(1)),"POST"===c.method||"PUT"===c.method){var e=a.merge(!0,c);delete e.headers,delete e.uri,delete e.data,delete e.method,c.data=e}b=q+c.uri,delete c.uri;var f=g({},c);return f&&(c.qs=f),!c.headers&&(c.headers={}),c.headers["X-Helios-ID"]=r.key,c.headers["Content-Type"]="application/json",new m(b,c,d)};"undefined"!=typeof module&&module.exports?module.exports=r:b.reach=a.reach=r,m=a&&a.request?a.request:require("./lib/request"),j=a&&a.image?a.image:require("./lib/image"),a&&a.merge||(a.merge=require("./lib/merge")),r.development=function(a){return a?(p=!!a,void(q=p?n:o)):p},r.key=null,r.get=h("GET"),r.post=h("POST"),r.put=h("PUT"),r.del=h("DELETE"),r.request=m,r.image=j,r.upload=i;var s=function(){function a(){}function b(b){var c=new XMLHttpRequest;c.submittedData=b,c.onload=a,c.open("post",b.receiver,!0);var d="---------------------------"+Date.now().toString(16);c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d),c.sendAsBinary("--"+d+"\r\n"+b.segments.join("--"+d+"\r\n")+"--"+d+"--\r\n")}function c(a){a.status>0||b(a)}function d(a){return a}function e(a){var b,e,f,g,h;this.contentType="multipart/form-data",this.technique=3,this.receiver=a.action,this.status=0,this.segments=[];for(var i=0;i<a.elements.length;i++)if(f=a.elements[i],f.hasAttribute("name")&&(e="INPUT"===f.nodeName.toUpperCase()?f.getAttribute("type").toUpperCase():"TEXT","FILE"===e&&f.files.length>0&&3===this.technique))for(b=0;b<f.files.length;b++)h=f.files[b],g=new FileReader,g.segmentIdx=this.segments.length,g.owner=this,g.onload=d,this.segments.push('Content-Disposition: form-data; name="'+f.name+'"; filename="'+h.name+'"\r\nContent-Type: '+h.type+"\r\n\r\n"),this.status++,g.readAsBinaryString(h);c(this)}return function(a){a.action&&new e(a)}}();s({}),b["true"]=a}({},function(){return this}());