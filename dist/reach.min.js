!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("form-data"),require("url"),require("https"),require("http"),function(){try{return require("fs")}catch(e){}}()):"function"==typeof define&&define.amd?define("reach",["form-data","url","https","http","fs"],t):"object"==typeof exports?exports.reach=t(require("form-data"),require("url"),require("https"),require("http"),function(){try{return require("fs")}catch(e){}}()):e.reach=t(e["form-data"],e.url,e.https,e.http,e.fs)}(this,function(e,t,r,n,o){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){(function(e){!function(t){function r(e,t){if("object"!==o(e))return t;for(var n in t)"object"===o(e[n])&&"object"===o(t[n])?e[n]=r(e[n],t[n]):e[n]=t[n];return e}function n(e,t,n){var i=n[0],u=n.length;(e||"object"!==o(i))&&(i={});for(var f=0;f<u;++f){var p=n[f];if("object"===o(p))for(var s in p){var c=e?a.clone(p[s]):p[s];i[s]=t?r(i[s],c):c}}return i}function o(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var a=function(e){return n(!0===e,!1,arguments)};a.recursive=function(e){return n(!0===e,!0,arguments)},a.clone=function(e){var t,r,n=e,i=o(e);if("array"===i)for(n=[],r=e.length,t=0;t<r;++t)n[t]=a.clone(e[t]);else if("object"===i){n={};for(t in e)n[t]=a.clone(e[t])}return n},t?e.exports=a:window.merge=a}("object"==typeof e&&e&&"object"==typeof e.exports&&e.exports)}).call(t,r(2)(e))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){}function a(e){if("POST"!==e.method&&"PUT"!==e.method)return e;if(e.headers&&"multipart/form-data"===e.headers["Content-Type"])return e;var t=(0,c.default)(e),r=(0,c.default)(!0,e);return delete r.headers,delete r.uri,delete r.data,delete r.method,t.data=r,t}function i(e,t){var r=(0,c.default)(e);t.where&&(r.where=t.where),t.limit&&(r.limit=t.limit),t.include&&(r.include=t.include),t.skip&&(r.skip=t.skip),t.fields&&(r.fields=t.fields),t.order&&(r.order=t.order);var n=!1;if(Object.keys(r).length>0)try{n=JSON.stringify(r)}catch(e){o()}return n}function u(e){return function(t,r,n){var o=t,a=n,i=r;return"function"==typeof i&&(a=i,i={}),"object"===(void 0===o?"undefined":p(o))?o.method=e:i.method=e,v(o,i,a)}}function f(e,t,r,n){var o=t,a=r,i=n;"function"==typeof a&&(i=a,a={}),o[0]?o=o.map(function(e){var t=(0,c.default)(!0,e);return t.path=t.name,t}):o.path=o.name,v("files/upload/"+e,{method:"POST",qs:{options:JSON.stringify(a)},headers:{"Content-Type":"multipart/form-data"},data:o},i)}Object.defineProperty(t,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(0),c=n(s),d=r(3),l=n(d),y=r(8),h=n(y),m=void 0,v=function e(t,r,n){if(!m)throw new Error("set the url for reach with reachjs.setUrl()");if(void 0===t)throw new Error("undefined is not a valid url or options object.");if(!e.key&&r.qs&&!r.qs.access_token)throw new Error("reach.key or token is required");var o=n,u=r,f=t;"function"==typeof u&&(o=u),"object"===(void 0===u?"undefined":p(u))?u.uri=f:u="string"==typeof f?{uri:f}:f,"/"===u.uri.substr(0,1)&&(u.uri=u.uri.substr(1)),u=a(u),f=m+u.uri,delete u.uri;var s=i({},u);return u.qs||(u.qs={}),s&&(u.qs.filter=s),u.headers||(u.headers={}),e.key&&!u.headers["X-Helios-ID"]&&(u.headers["X-Helios-ID"]=e.key),u.headers["Content-Type"]||(u.headers["Content-Type"]="application/json"),new l.default(f,u,o)};v.key=null,v.get=u("GET"),v.post=u("POST"),v.put=u("PUT"),v.del=u("DELETE"),v.request=l.default,v.image=h.default,v.upload=f,v.development=function(){throw new Error("reach.development is no longer supported. Set the url explicitly with reach.setUrl()")},v.setUrl=function(e){var t=e;"/"!==e.substr(-1)&&(t+="/"),"api/"!==e.substr(-4)&&(t+="api/"),t&&(m=t)},t.default=v,e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=function(){function e(){}function t(e){var t=r(4),n=new t;return n.append("file",e.data,{filename:e.path,contentType:e.type,basename:!1}),n}function o(e){function t(t,r){return t.push(r+"="+encodeURIComponent(e[r])),t}return e?"string"==typeof e?"?"+e:"?"+Object.keys(e).reduce(t,[]).join("&"):""}function i(e){function t(e){if(e){var t=e.split(":");r[t[0]]=t[1].trim()}}if(!e)return e;var r={};return e.split("\r\n").forEach(t),r}var u=function(t,r,u){function f(e){u(e)}var p=this;this.oReq=new XMLHttpRequest;var s=(0,a.default)(r),c=""+t+o(s.qs),d=function(t){var r={body:t.target.response,status:t.target.status,url:t.target.responseURL,headers:i(p.oReq.getAllResponseHeaders())};try{var n=JSON.parse(t.target.response);r.body=n}catch(t){e()}u(null,r)};this.oReq.addEventListener("load",d),this.oReq.addEventListener("error",f),this.oReq.open(s.method&&s.method.toUpperCase()||"GET",c,!0);var l=null;s.data&&(s.headers&&"multipart/form-data"===s.headers["Content-Type"]?(l=new FormData,l.append("file",s.data.data,s.data.path),delete s.headers["Content-Type"]):l=JSON.stringify(s.data)),s.headers&&"object"===n(s.headers)&&Object.keys(s.headers).forEach(this.setHeaders.bind(this,s.headers)),this.oReq.send(l)};u.prototype.setHeaders=function(e,t){this.oReq.setRequestHeader(t,e[t])};var f=function(n,a,i){function u(t){function r(e){o.body+=e}function n(){try{var t=JSON.parse(o.body);o.body=t}catch(t){e()}i(null,o)}var o={body:"",status:t.statusCode,url:s,headers:t.headers};t.setEncoding("utf8"),t.on("data",r),t.on("end",n)}function f(e){i(e)}var p=r(5),s=""+n+o(a.qs),c=p.parse(s,!0,!0),d=void 0;d=r("https:"===c.protocol?6:7);var l={host:c.hostname,protocol:c.protocol,port:c.port,path:c.path,headers:a.headers,method:a.method},y=!1;a.headers&&"multipart/form-data"===a.headers["Content-Type"]&&(y=t(a.data),l.headers["Content-Type"]=y.getHeaders()["content-type"]);var h=d.request(l,u).on("error",f);y?y.pipe(h):a.data&&h.write(JSON.stringify(a.data)),h.end()};return"undefined"!=typeof XMLHttpRequest?u:f}();t.default=i,e.exports=t.default},function(e,t){e.exports=require("form-data")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("http")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=(new Date).getTime();return o&&(e+=o.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)})}function t(t,r,o){var a=e()+n.supportedMimeTypes[r.type];try{t.toBlob(function(e){o(null,{name:a,type:r.type,data:e})},r.type,r.quality)}catch(e){setTimeout(function(){var e=new RegExp("data:"+r.type+";base64,"),n=new Buffer(t.toDataURL(r.type,r.quality).replace(e,""),"base64");o(null,{name:a,type:r.type,data:n})},1)}}var n={},o=!1;try{window&&window.performance&&"function"==typeof window.performance.now&&(o=window.performance)}catch(e){}n.supportedMimeTypes={".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".gif":"image/gif",".mp4":"video/mp4","image/png":".png","image/jpeg":".jpg","image/gif":".gif","video/mp4":".mp4"};try{HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,r){for(var n=atob(this.toDataURL(t,r).split(",")[1]),o=n.length,a=new Uint8Array(o),i=0;i<o;i+=1)a[i]=n.charCodeAt(i);e(new Blob([a],{type:t||"image/png"}))}})}catch(e){}return n.fromCanvas=function(e,r,n){var o=n,a=r;"function"==typeof a&&(o=a,a="image/png"),"string"==typeof a&&(a={type:a,quality:1}),a.type||(a.type="image/png"),a.quality||(a.quality=1),t(e,a,o)},n.fromImage=function(e,t,r){var o="."+e.src.split(".").pop(),a=r,i=t;"function"==typeof i&&(a=i,i={type:n.supportedMimeTypes[o],quality:1}),"string"==typeof i&&(i={type:i,quality:1});var u=document.createElement("canvas");u.width=e.width,u.height=e.height,u.getContext("2d").drawImage(e,0,0),n.fromCanvas(u,i,a)},n.fromFileInput=function(e,t){return n.fromBuffer(e,e.name,t),e},n.fromLocalPath=function(e,t){try{r(9).readFile(e,function(r,o){n.fromBuffer(o,e,t)})}catch(e){throw new Error("reach.image.fromLocalPath only supported in node.")}return e},n.fromBuffer=function(t,r,o){setTimeout(function(){var a="."+r.split(".").pop();o(null,t&&{name:e()+a,type:n.supportedMimeTypes[a],data:t})},1)},n}();t.default=n,e.exports=t.default},function(e,t){e.exports=require("fs")}])});